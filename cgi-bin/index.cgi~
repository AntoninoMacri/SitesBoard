#!/usr/bin/perl
#messaggi di errore al browser
use CGI;
use CGI::Carp qw(fatalsToBrowser);

#per la gestione delle sessioni
use CGI::Session;

#funzioni per le sessioni
sub createSession(){
	my $session = new CGI::Session();
	my ($name,$surname,$year,$month,$day,$username,$email,$password) = split(@_);

	$session->param('name',$name);
	$session->param('surname',$surname);
	$session->param('year',$year);
	$session->param('month',$month);
	$session->param('day',$day);
	$session->param('username',$username);
	$session->param('email',$email);
	$session->param('password',$password);
}

sub getSession(){
	my $session = CGI::Session->load() or die $!;
	if($session->is_expired || $session->is_empty){
		return undef;
	}
	else{
		my $utente = $session->param('name');
		return $utente;
	}
}

sub destroySession(){
	$session=CGI::Session->load() or die $!;
	$SID = $session->id;
	$session->close();
	$session->delete();
	$session->flush();
}

$nome_utente = getSession();

print "Content-type: text/html\n\n";
print "<html><head></head><body>ciao";
print "$nome_utente</body></html>";

